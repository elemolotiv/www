<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1f2937">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Vito Calculator">
    <title>Vito Calculator</title>
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlZpdG8gQ2FsY3VsYXRvciIsCiAgInNob3J0X25hbWUiOiAiVml0byBDYWxjIiwKICAic3RhcnRfdXJsIjogIi4vIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMWYyOTM3IiwKICAidGhlbWVfY29sb3IiOiAiIzFmMjkzNyIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJeE9USWlJR2hsYVdkb2REMGlNVGt5SWo0OGNtVmpkQ0IzYVdSMGFEMGlNVGt5SWlCb1pXbG5hSFE5SWpFNU1pSWdabWxzYkQwaUl6Rm1Namt6TnlJdlBqeDBaWGgwSUhnOUlqazJJaUI1UFNJeE1EQWlJR1pwYkd3OUluZG9hWFJsSWlCbWIyNTBMV1poYldsc2VUMGlRWEpwWVd3aUlHWnZiblF0YzJsNlpUMGlOalFpSUdadmJuUXRkMlZwWjJoMFBTSmliMnhrSWlCMFpYaDBMV0Z1WTJodmNqMGliV2xrWkd4bElqNURQQzkwWlhoMFBqeDBaWGgwSUhnOUlqazJJaUI1UFNJeE5EQWlJR1pwYkd3OUluZG9hWFJsSWlCbWIyNTBMV1poYldsc2VUMGlRWEpwWVd3aUlHWnZiblF0YzJsNlpUMGlNelFpSUhSbGVIUXRZVzVqYUc5eVBTSnRhV1JrYkdVaVBsWnBkRzg4TDNSbGVIUStQSFJsZUhRZ2VEMGlPVFlpSUhrOUlqRTRNQ0lnWm1sc2JEMGlkMmhwZEdVaUlHWnZiblF0Wm1GdGFXeDVQU0pCY21saGJDSWdabTl1ZEMxemFYcGxQU0l6TkNJZ2RHVjRkQzFoYm1Ob2IzSTlJbTFwWkdSc1pTSTZRMkZzWXp3dmRHVjRkRDQ4TDNOMlp6ND0iLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIZHBaSFJvUFNJMU1USWlJR2hsYVdkb2REMGlOVEV5SWo0OGNtVmpkQ0IzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWdabWxzYkQwaUl6Rm1Namt6TnlJdlBqeDBaWGgwSUhnOUlqSTFOaUlnZVQwaU1qYzJJaUJtYVd4c1BTSjNhR2wwWlNJZ1ptOXVkQzFtWVcxcGJIazlJa0Z5YVdGc0lpQm1iMjUwTFhOcGVtVTlJakUyTUNJZ1ptOXVkQzEzWldsbmFIUTlJbUp2YkdRaUlIUmxlSFF0WVc1amFHOXlQU0p0YVdSa2JHVWlQa004TDNSbGVIUStQSFJsZUhRZ2VEMGlNalUySWlCNVBTSTBNREFpSUdacGJHdzlJbmRvYVhSbElpQm1iMjUwTFdaaGJXbHNlVDBpUVhKcFlXd2lJR1p2Ym5RdGMybDZaVDBpT0RBaUlIUmxlSFF0WVc1amFHOXlQU0p0YVdSa2JHVWlQbFpwZEc4OEwzUmxlSFErUEhSbGVIUWdlRDBpTWpVMklpQjVQU0kwT0RBaUlHWnBiR3c5SW5kb2FYUmxJaUJtYjI1MExXWmhiV2xzZVQwaVFYSnBZV3dpSUdadmJuUXRjMmw2WlQwaU9EQWlJSFJsZUhRdFlXNWphRzl5UFNKdGFXUmtiR1VpUGtOaGJHTThMM1JsZUhRK1BDOXpkbWMrIiwKICAgICAgInNpemVzIjogIjUxMng1MTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfQogIF0KfQ==">
    
    <!-- Apple Touch Icon -->
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIj48cmVjdCB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgZmlsbD0iIzFmMjkzNyIvPjx0ZXh0IHg9Ijk2IiB5PSIxMDAiIGZpbGw9IndoaXRlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNjQiIGZvbnQtd2VpZ2h0PSJib2xkIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5DPC90ZXh0Pjx0ZXh0IHg9Ijk2IiB5PSIxNDAiIGZpbGw9IndoaXRlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMzQiIHRleHQtYW5jaG9yPSJtaWRkbGUiPlZpdG88L3RleHQ+PHRleHQgeD0iOTYiIHk9IjE4MCIgZmlsbD0id2hpdGUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIzNCIgdGV4dC1hbmNob3I9Im1pZGRsZSI+Q2FsYzwvdGV4dD48L3N2Zz4=">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #111827;
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        
        .calculator {
            background: #1f2937;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            max-width: 400px;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .header h1 {
            font-size: 1.5rem;
            color: #10b981;
            margin-bottom: 0.5rem;
        }
        
        .display {
            background: #111827;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: flex-end;
        }
        
        .previous-operand {
            font-size: 1.2rem;
            color: #6b7280;
            min-height: 1.5rem;
        }
        
        .current-operand {
            font-size: 2.5rem;
            font-weight: 300;
            word-wrap: break-word;
            word-break: break-all;
            min-height: 3rem;
        }
        
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.75rem;
        }
        
        button {
            background: #374151;
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1.5rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        button:hover {
            background: #4b5563;
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        .span-two {
            grid-column: span 2;
        }
        
        .operator {
            background: #10b981;
        }
        
        .operator:hover {
            background: #059669;
        }
        
        .clear {
            background: #ef4444;
        }
        
        .clear:hover {
            background: #dc2626;
        }
        
        .delete {
            background: #f59e0b;
        }
        
        .delete:hover {
            background: #d97706;
        }
        
        .install-info {
            margin-top: 2rem;
            text-align: center;
            font-size: 0.875rem;
            color: #6b7280;
            max-width: 400px;
        }
        
        .install-info p {
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <div class="header">
            <h1>Vito Calculator</h1>
        </div>
        
        <div class="display">
            <div class="previous-operand" id="previousOperand"></div>
            <div class="current-operand" id="currentOperand">0</div>
        </div>
        
        <div class="buttons">
            <button class="clear" onclick="clear()">AC</button>
            <button class="delete" onclick="deleteDigit()">DEL</button>
            <button class="operator" onclick="chooseOperation('Ã·')">Ã·</button>
            <button class="operator" onclick="chooseOperation('Ã—')">Ã—</button>
            
            <button onclick="appendNumber('7')">7</button>
            <button onclick="appendNumber('8')">8</button>
            <button onclick="appendNumber('9')">9</button>
            <button class="operator" onclick="chooseOperation('-')">âˆ’</button>
            
            <button onclick="appendNumber('4')">4</button>
            <button onclick="appendNumber('5')">5</button>
            <button onclick="appendNumber('6')">6</button>
            <button class="operator" onclick="chooseOperation('+')">+</button>
            
            <button onclick="appendNumber('1')">1</button>
            <button onclick="appendNumber('2')">2</button>
            <button onclick="appendNumber('3')">3</button>
            <button class="operator" onclick="compute()">=</button>
            
            <button class="span-two" onclick="appendNumber('0')">0</button>
            <button onclick="appendNumber('.')">.</button>
            <button class="operator" onclick="chooseOperation('%')">%</button>
        </div>
    </div>
    
    <div class="install-info">
        <p><strong>Install this calculator:</strong></p>
        <p>ðŸ“± Mobile: Use browser menu â†’ "Add to Home screen"</p>
        <p>ðŸ’» Desktop: Look for install icon in address bar</p>
    </div>

    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register(
                'data:application/javascript;base64,' + btoa(`
                    const CACHE_NAME = 'vito-calc-v1';
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME).then((cache) => {
                                return cache.addAll(['/']);
                            })
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request).then((response) => {
                                return response || fetch(event.request);
                            })
                        );
                    });
                `)
            ).catch(err => console.log('Service Worker registration failed:', err));
        }

        // Calculator Logic
        let currentOperand = '0';
        let previousOperand = '';
        let operation = null;

        const currentOperandElement = document.getElementById('currentOperand');
        const previousOperandElement = document.getElementById('previousOperand');

        function updateDisplay() {
            currentOperandElement.textContent = currentOperand;
            if (operation != null) {
                previousOperandElement.textContent = `${previousOperand} ${operation}`;
            } else {
                previousOperandElement.textContent = previousOperand;
            }
        }

        function appendNumber(number) {
            if (number === '.' && currentOperand.includes('.')) return;
            if (currentOperand === '0' && number !== '.') {
                currentOperand = number;
            } else {
                currentOperand += number;
            }
            updateDisplay();
        }

        function chooseOperation(op) {
            if (currentOperand === '') return;
            if (previousOperand !== '') {
                compute();
            }
            operation = op;
            previousOperand = currentOperand;
            currentOperand = '';
            updateDisplay();
        }

        function compute() {
            let computation;
            const prev = parseFloat(previousOperand);
            const current = parseFloat(currentOperand);
            
            if (isNaN(prev) || isNaN(current)) return;
            
            switch (operation) {
                case '+':
                    computation = prev + current;
                    break;
                case '-':
                    computation = prev - current;
                    break;
                case 'Ã—':
                    computation = prev * current;
                    break;
                case 'Ã·':
                    computation = prev / current;
                    break;
                case '%':
                    computation = prev % current;
                    break;
                default:
                    return;
            }
            
            currentOperand = computation.toString();
            operation = null;
            previousOperand = '';
            updateDisplay();
        }

        function clear() {
            currentOperand = '0';
            previousOperand = '';
            operation = null;
            updateDisplay();
        }

        function deleteDigit() {
            if (currentOperand.length === 1) {
                currentOperand = '0';
            } else {
                currentOperand = currentOperand.slice(0, -1);
            }
            updateDisplay();
        }

        // Keyboard Support
        document.addEventListener('keydown', (e) => {
            if (e.key >= '0' && e.key <= '9') appendNumber(e.key);
            if (e.key === '.') appendNumber('.');
            if (e.key === '+' || e.key === '-' || e.key === '*' || e.key === '/') {
                const ops = {'+': '+', '-': '-', '*': 'Ã—', '/': 'Ã·'};
                chooseOperation(ops[e.key]);
            }
            if (e.key === '%') chooseOperation('%');
            if (e.key === 'Enter' || e.key === '=') compute();
            if (e.key === 'Escape') clear();
            if (e.key === 'Backspace') deleteDigit();
        });

        updateDisplay();
    </script>
</body>
</html>
